.home{
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
}

.envelope {
    position: relative;
    width: calc(var(--size-unit)* 3 - 1px);
    height: calc(var(--size-unit)* 3);
    perspective: 1000px;
    border: 0px solid black;
    background: darkgray;
    transition: calc(var(--duration-envelope)) ease calc(var(--duration-envelope) / 2);
    box-shadow: var(--box-shadow);
    &-flap {
        position: absolute;
        top: 0;
        left: 50%;
        width: 33.3333333333%;
        height: 0;
        border-left: var(--size-unit) solid transparent;
        border-right: var(--size-unit) solid transparent;
        border-top: calc(var(--size-unit)*1.2) solid var(--purple);
        transform-origin: top center;
        transform: translateX(-50%) rotateX(0deg);
        transition: calc(var(--duration-envelope)*3) ease calc(var(--duration-envelope)* 2.5);
        z-index: 3;
    }

    &-flap-bg {
        position: absolute;
        top: 0;
        left: 50%;
        width: calc(100% / 3);
        height: 0;
        overflow: hidden;
        border-left: var(--size-unit) solid lightgray;
        border-right: var(--size-unit) solid lightgray;
        border-top: var(--size-unit) solid transparent;
        transform-origin: top center;
        transform: translateX(-50%) rotateX(0deg);
        transition: calc(var(--duration-envelope)) ease;
        z-index: 2;
    }
    .nombre-invitado{
        position: absolute;
        bottom: 0;
        z-index: 1;
        width: 100%;
        display: flex;
        justify-content: center;
        
        @media (orientation: portrait) {
            height: calc(var(--size-unit)* 1.3);
        }
        @media (orientation: landscape) {
            height: calc(var(--size-unit)* 1.3);
        }
        font-size: calc(var(--size-unit)* 0.2);
        color: var(--green);
    }
    &-body {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 70%;
        background-color: #e0e0e0;
        z-index: 1;

        &:before {
            content: "";
            width: 100%;
            z-index: 5;
            height: 100%;
            background: lightgray;
            position: absolute;
            bottom: 0;
        }
    }

    &-content {
        position: absolute;
        bottom: 0; /* Cambiado para que est√© en la parte inferior del sobre */
        left: 50%;
        width: 80%;
        height: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
        transform: translateY(calc(var(--size-unit) / -5)) translateX(calc(var(--size-unit)*1.2 / -1)) rotateX(-10deg); /* Inicialmente desplazado y girado */
        transition: calc(var(--duration-envelope)*2) ease-out calc(var(--duration-envelope)*1);
        z-index: 2;

        
        .card {
            transition: calc(var(--duration-envelope)*2) ease 0s;
            z-index: 2;
            background: var(--darkGreen) !important;

            &:not(.invitacion){
                scale: .5 !important;
            }
        
            &.invitacion{
                width: calc(var(--size-unit)* 2.5);
                height: calc(var(--size-unit)* 2.5);
            }
            
            &.horarios{
                background: orange;
                width: calc(var(--size-unit)* 2.5);
                height: calc(var(--size-unit)* 4);
                margin-top: 0;
                margin-left: 0;
                rotate: -2deg !important;
            }
            &.asistencia{
                background: yellow;
                width: calc(var(--size-unit)* 2.5);
                height: calc(var(--size-unit)* 2);
            }
            &.ubicaciones{
                background: lightblue;
                width: calc(var(--size-unit)* 2.6);
                height: calc(var(--size-unit)* 2);
            }
            &.regalo{
                background: purple;
                width: calc(var(--size-unit)* 2.5);
                height: calc(var(--size-unit)* 3);
                transform: rotateZ(51deg);
            }
        }
    }


    .wax-seal {
        position: absolute;
        top: 71%;
        left: 50%;
        width: calc(var(--size-unit)/2);
        height: calc(var(--size-unit)/2);
        background-color: var(--green);
        border-radius: 50%;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
        transform: translate(-50%, -50%);
        cursor: pointer;
        z-index: 3;
        opacity: 1 !important;
        &:before{
            transition: calc(var(--duration-envelope)) ease calc(var(--duration-envelope)/2); 
            opacity: 0;
        }
    }

    &.open {
        
        
        transition: calc(var(--duration-envelope)) ease calc(var(--duration-envelope)*2);
        @media (orientation: portrait) {
            transform: translateY(calc(var(--size-unit) * 4)) rotateZ(-14deg) translateX(calc(var(--size-unit)*0.7));
        }
        @media (orientation: landscape) {
            transform: translateY(calc(var(--size-unit) * 3.2)) rotateZ(-14deg) translateX(calc(var(--size-unit) * 2))
        }
        .wax-seal {
            &:before{
                opacity: 1;
                transition: calc(var(--duration-envelope)) ease calc(var(--duration-envelope)); 
            }
        }
        .envelope{
            &-flap {
                transform: translateX(-50%) rotateX(180deg);
                z-index: 1;
                // transition: calc(var(--duration-envelope)*1) ease;
                transition: calc(var(--duration-envelope)*3) ease calc(var(--duration-envelope)* 0);
            }
            &-content {
                transform: translateY(calc(var(--size-unit)* -5)) rotateZ(3deg) translateX(calc(var(--size-unit)* -.6 )) rotateX(0deg) rotateZ(15deg);
                transition: opacity 0s, transform calc(var(--duration-envelope)*3) ease calc(var(--duration-envelope)*1);
                z-index: 3;
                .card{   
                    transition: calc(var(--duration-card)*.5) ease 0s;
                                // margin calc(var(--duration-card)*1) ease-in-out calc(var(--duration-card)*.5);
 
                    
                    @media (orientation: landscape) {
                        margin-right: calc(var(--size-unit)* 5.8);
                        margin-bottom: calc(var(--size-unit)* -1);
                        margin-right: calc(var(--size-unit)* 4);                
                    }
                    &.flipped{
                        scale: 1 !important;
                    }
                    
                    &.flipped{
                        transition: calc(var(--duration-card)*.2) linear 0s;
                        // transition: calc(var(--duration)*.5) linear 0s, margin calc(var(--duration)) linear calc(var(--duration)*0), scale calc(var(--duration)) linear calc(var(--duration)*0);
                    }

                    &.unflipped{
                        transition: calc(var(--duration-card)*.2) linear 0s;
                    }
   
   
                    &:not(.flipped):not(.unflipped):hover{
                        scale: 1.2;
                        transition: calc(var(--duration-envelope)*.5) linear 0s !important;
                    }
                    &.invitacion{
                        margin-top: calc(var(--size-unit)* -1);
                        rotate: 0deg !important;
                        @media (orientation: landscape) {
                            margin-left: calc(var(--size-unit)* 1.8);
                        }
                        @media (orientation: portrait) {
                            margin-left: calc(var(--size-unit)* -0.2);
                        }
                        &:not(.flipped):not(.unflipped){
                            transition: calc(var(--duration-envelope)*1) ease-in calc(var(--duration-envelope)*2.6),
                            rotate calc(var(--duration-envelope)*.75) ease-in-out calc(var(--duration-envelope)*3.3);
                        }
                        &.flipped{
                            margin-top: calc(var(--size-unit)* 1);
                            width: calc(var(--size-unit)* 3);
                            height: calc(var(--size-unit)* 3);
                            rotate: -4deg !important;
                            @media (orientation: landscape) {
                                margin-left: calc(var(--size-unit)* 1);
                            }
                            @media (orientation: portrait) {
                                margin-left: calc(var(--size-unit)* -.2);
                            }
                                                        
                        }
                    }


                    &.horarios{
                        margin-top: calc(var(--size-unit)* 5);
                        margin-left: calc(var(--size-unit)* -1.5);
                        rotate: -40deg !important;
                        &:not(.flipped):not(.unflipped){
                            transition: calc(var(--duration-envelope)*1) ease-in calc(var(--duration-envelope)*2.6),
                            rotate calc(var(--duration-envelope)*1) ease-in-out calc(var(--duration-envelope)*3);
                        }
                        
                        &.flipped{
                            rotate: -2deg !important;
                            @media (orientation: landscape) {
                                margin-top: calc(var(--size-unit)* 2);
                                margin-left: calc(var(--size-unit)* 1.5);
                            }
                            @media (orientation: portrait) {
                                margin-top: calc(var(--size-unit)* 1.5);
                                margin-left: calc(var(--size-unit)* -0.3);
                            }
                        }
                    }
                    &.asistencia{
                        margin-top: calc(var(--size-unit)* 2.6);
                        margin-left: calc(var(--size-unit)* -1);
                        rotate: -10deg !important;
                        &:not(.flipped):not(.unflipped){
                            transition: calc(var(--duration-envelope)*1) linear calc(var(--duration-envelope)*2.3),
                            rotate calc(var(--duration-envelope)*1) ease-in-out calc(var(--duration-envelope)*3);
                        }
                        &.flipped{
                            margin-top: calc(var(--size-unit)* 1.6);
                            margin-left: calc(var(--size-unit)* -0.2);
                            rotate: -1deg !important;
                        }
                    }
                    &.ubicaciones{
                        margin-top: calc(var(--size-unit)* 4.4);
                        margin-left: calc(var(--size-unit)* 2.3);
                        rotate: -40deg !important;
                        &:not(.flipped):not(.unflipped){
                            transition: calc(var(--duration-envelope)*1) linear calc(var(--duration-envelope)*3),
                            rotate calc(var(--duration-envelope)*1) ease-in-out calc(var(--duration-envelope)*3.3);
                        }
                        &.flipped{
                            rotate: -8deg !important;
                            @media (orientation: portrait) {
                                margin-top: calc(var(--size-unit)* 1);
                                margin-left: calc(var(--size-unit)* -0.1);
                            }
                            @media (orientation: landscape) {
                                margin-top: calc(var(--size-unit)* 3);
                                margin-left: calc(var(--size-unit)* 2.9);
                            }


                        }
                    }
                    &.regalo{
                        margin-top: calc(var(--size-unit)* 3);
                        margin-left: calc(var(--size-unit)* 1.2);
                        rotate: -40deg !important;
                        &:not(.flipped):not(.unflipped){
                            transition: calc(var(--duration-envelope)*1) linear calc(var(--duration-envelope)*2.25),
                            rotate calc(var(--duration-envelope)*1) ease-in-out calc(var(--duration-envelope)*2.7);
                        }
                        &.flipped{

                            rotate: -57deg !important;
                            @media (orientation: portrait) {
                                margin-top: calc(var(--size-unit)* 1.7);
                                margin-left: calc(var(--size-unit)* 0);
                            }
                            @media (orientation: landscape) {
                                margin-top: calc(var(--size-unit)* 3);
                                margin-left: calc(var(--size-unit)* 1);
                            }
                        }
                    }
                }
            }

        }
    }
}
